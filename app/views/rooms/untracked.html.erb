<h4>This room is not tracked and will be removed at a closest SYNC event, unless added to the CTS.</h4>

<p>Room name: <%= @room_name %></p>

<% if Integer === @room_info %>
	<p>Room does not exist (code <%= @room_info %>)</p>
<% elsif @room_info %>
<pre>
Participants: <%= @room_info['num_participants'] %>
Last Message: <%= Time.parse("#{@room_info['last_message_at']} +0000").utc %>
Subject (author: <%= @room_info['subject_author'] %>):
<%= @room_info['subject'] %>
</pre>

<p><h3>Configuration (<%= @room_info['config'].size %>):</h3>
<table id="config" class="table table-bordered table-condensed" cellpadding="0" cellspacing="0" border="0">
	<thead>
		<tr>
			<th><%=t 'Key' %></th>
			<th><%=t 'Value' %></th>
		</tr>
	</thead>
	<tbody>
		<% @room_info['config'].each do |key, value| %>
		<tr>
			<td><%= key %></td>
			<td><%= value %></td>
		</tr>
		<% end %>
	</tbody>
</table>
</p>
<p><h3>Affiliations (<%= @room_info['affiliations'].size %>):</h3>
<table id="affiliations" class="table table-bordered table-condensed" cellpadding="0" cellspacing="0" border="0">
	<thead>
		<tr>
			<th><%=t 'User' %></th>
			<th><%=t 'Domain' %></th>
			<th><%=t 'Affiliation' %></th>
			<th><%=t 'Reason' %></th>
		</tr>
	</thead>
	<tbody>
		<% @room_info['affiliations'].each do |hash| %>
			<tr>
			<% hash.each do |key, value| %>
			<td><%= value %></td>
			<% end %>
			</tr> 
		<% end %>
	</tbody>
</table>
</p>
<p><h3>Occupants (<%= @room_info['users'].size %>):</h3>
<table id="occupants" class="table table-bordered table-condensed" cellpadding="0" cellspacing="0" border="0">
	<thead>
		<tr>
			<th><%=t 'JID' %></th>
			<th><%=t 'Nick' %></th>
			<th><%=t 'Role' %></th>
		</tr>
	</thead>
	<tbody>
		<% @room_info['users'].each do |hash| %>
			<tr>
			<% hash.each do |key, value| %>
			<td><%= value %></td>
			<% end %>
			</tr> 
		<% end %>
	</tbody>
</table>
</p>
<% end %>
