<div id="orders_chart"></div>

<%= javascript_tag defer: 'defer' do -%>
  $(function() {
    new Highcharts.Chart({
      chart: { 
        renderTo: 'orders_chart',
        zoomType: 'x'
      },
      
      title: { text: 'Income' },

      subtitle: {
        text: document.ontouchstart === undefined ?
        'Click and drag in the plot area to zoom in' :
        'Pinch the chart to zoom in'
      },

      xAxis: { 
        type: 'datetime',
        maxZoom: 24 * 3600000,
        dateTimeLabelFormats: {
          month: '%b \'%Y'
        }
      },
          
      yAxis: {
        title: { text: 'Amount' },
        labels: {
          format: '{value} $'
        }
      },
      
      series: [{
        name: 'Income',
        pointInterval: 24 * 3600000,
        data: <%=raw @income.to_a.to_json %>
      }]
    });
  });
<% end -%>

<%=raw @income.to_a.to_json %>
